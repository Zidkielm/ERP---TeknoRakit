<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>TeknoRakit ERP - Login</title>
        <link rel="stylesheet" href="style.css" />
        <style>
            /* Style Khusus Halaman Login (Sederhana saja dulu) */
            .login-container {
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                height: 100vh;
                background-color: #2c3e50;
            }
            .login-box {
                background: white;
                padding: 40px;
                border-radius: 10px;
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
                width: 300px;
                text-align: center;
            }
            .login-box input {
                width: 100%;
                padding: 10px;
                margin: 10px 0;
                border: 1px solid #ccc;
                border-radius: 5px;
            }
            .login-box button {
                width: 100%;
                padding: 10px;
                background-color: #27ae60;
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                font-size: 16px;
            }
            .error-msg {
                color: red;
                font-size: 12px;
                margin-top: 10px;
                display: none;
            }

            /* Bagian Dashboard (Awalnya disembunyikan) */
            #dashboard-view {
                display: none;
                height: 100vh;
            }
            .welcome-screen {
                display: flex;
                justify-content: center;
                align-items: center;
                height: 100%;
                font-size: 24px;
                color: #333;
                flex-direction: column;
            }
        </style>
    </head>
    <body>
        <div id="login-view" class="login-container">
            <div class="login-box">
                <h2>ERP System</h2>
                <p style="margin-bottom: 20px; color: #666">Silakan Masuk</p>
                <input type="text" id="inp-username" placeholder="Username" />
                <input type="password" id="inp-password" placeholder="Password" />
                <button id="btn-login">LOGIN</button>
                <p id="login-error" class="error-msg">Username atau Password Salah!</p>
            </div>
        </div>

        <div id="dashboard-view">
            <div class="sidebar">
                <h2>TeknoRakit</h2>
                <div id="user-info" style="font-size: 12px; color: #bdc3c7; margin-bottom: 20px; text-align: center">Role: <span id="span-role">-</span></div>

                <button id="btn-menu-dashboard" class="menu-btn active" onclick="showPage('page-home')">üè† Dashboard</button>
                <button id="btn-menu-users" class="menu-btn" onclick="showPage('page-users')">üë• Manajemen User</button>
                <button id="btn-menu-products" class="menu-btn" onclick="showPage('page-products')">üì¶ Master Produk</button>
                <button id="btn-menu-vendors" class="menu-btn" onclick="showPage('page-vendors')">üè≠ Data Vendor</button>
                <button id="btn-menu-po" class="menu-btn" onclick="showPage('page-po')">üõí Purchase Order</button>
                <button id="btn-menu-so" class="menu-btn" onclick="showPage('page-so')">üí∞ Sales Order</button>
                <button id="btn-menu-wo" class="menu-btn" onclick="showPage('page-wo')">üîß Produksi (WO)</button>

                <button
                    onclick="location.reload()"
                    style="margin-top: auto; background: #c0392b; color: white; border: none; padding: 10px; cursor: pointer; border-radius: 5px">
                    Logout
                </button>
            </div>

            <div class="main-content">
                <div id="page-home" class="page-section active">
                    <h1>Selamat Datang, Admin!</h1>
                    <p>Anda memiliki akses penuh ke seluruh sistem.</p>
                    <div style="display: flex; gap: 20px; margin-top: 30px">
                        <div style="background: white; padding: 20px; flex: 1; border-radius: 8px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1)">
                            <h3>Total User</h3>
                            <h1 id="stat-user-count">0</h1>
                        </div>
                        <div style="background: white; padding: 20px; flex: 1; border-radius: 8px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1)">
                            <h3>Total Produk</h3>
                            <h1 id="stat-product-count">0</h1>
                        </div>
                    </div>
                </div>

                <div id="page-users" class="page-section">
                    <h1>Manajemen Pengguna</h1>

                    <div class="table-container">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 15px">
                            <button
                                onclick="openUserModal()"
                                style="background: #2980b9; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer">
                                + Tambah User
                            </button>
                            <button class="btn-action" id="btn-refresh-users">Refresh List</button>
                        </div>

                        <table>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Username</th>
                                    <th>Nama Lengkap</th>
                                    <th>Role</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="table-users-body"></tbody>
                        </table>
                    </div>
                </div>

                <div id="page-vendors" class="page-section">
                    <h1>Data Vendor</h1>
                    <div class="table-container">
                        <button class="btn-action" id="btn-refresh-vendors" style="margin-bottom: 15px">Refresh</button>
                        <table>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Nama</th>
                                    <th>Telepon</th>
                                    <th>Email</th>
                                    <th>Alamat</th>
                                </tr>
                            </thead>
                            <tbody id="table-vendors-body"></tbody>
                        </table>
                    </div>
                </div>

                <div id="page-products" class="page-section">
                    <h1>Master Produk</h1>
                    <div class="table-container">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 15px">
                            <button
                                id="btn-add-product"
                                onclick="openAddModal()"
                                style="display: none; background: #2980b9; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer">
                                + Tambah Produk
                            </button>

                            <button class="btn-action" id="btn-refresh-products">Refresh</button>
                        </div>

                        <table>
                            <thead>
                                <tr>
                                    <th>SKU</th>
                                    <th>Nama Produk</th>
                                    <th>Tipe</th>
                                    <th>Stok</th>
                                    <th>Harga</th>
                                    <th style="text-align: center">Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="table-products-body"></tbody>
                        </table>
                    </div>
                </div>

                <div id="page-po" class="page-section">
                    <h1>Purchase Orders</h1>
                    <p>Modul Purchasing...</p>
                </div>
                <div id="page-so" class="page-section">
                    <h1>Sales Orders</h1>
                    <p>Modul Sales...</p>
                </div>
                <div id="page-wo" class="page-section">
                    <h1>Work Orders</h1>
                    <p>Modul Produksi...</p>
                </div>
            </div>
        </div>

        <script type="module" src="/src/renderer.js"></script>
        <script>
            // Script Navigasi Sederhana
            window.showPage = (pageId) => {
                document.querySelectorAll('.page-section').forEach((el) => el.classList.remove('active'))
                document.querySelectorAll('.menu-btn').forEach((el) => el.classList.remove('active'))

                document.getElementById(pageId).classList.add('active')
                // Hacky way to highlight menu button, idealnya via renderer
                event.srcElement.classList.add('active')
            }
        </script>
        <!-- Modal produk -->
        <div id="modal-product" class="modal-overlay" style="display: none">
            <div class="modal-box">
                <h2 id="modal-title">Tambah Produk</h2>

                <input type="hidden" id="prod-id" />

                <div class="form-group">
                    <label>SKU (Kode Barang)</label>
                    <input type="text" id="prod-sku" placeholder="Contoh: RM-KBL-001" />
                </div>
                <div class="form-group">
                    <label>Nama Produk</label>
                    <input type="text" id="prod-name" placeholder="Nama Barang" />
                </div>
                <div class="form-group">
                    <label>Tipe</label>
                    <select id="prod-type">
                        <option value="RAW_MATERIAL">Bahan Baku (Raw Material)</option>
                        <option value="FINISHED_GOOD">Barang Jadi (Finished Good)</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Satuan</label>
                        <input type="text" id="prod-unit" placeholder="Pcs/Kg/Roll" />
                    </div>
                    <div class="form-group">
                        <label>Min. Stok (Alert)</label>
                        <input type="number" id="prod-min" value="10" />
                    </div>
                </div>
                <div class="form-group">
                    <label>Harga (Beli/Jual)</label>
                    <input type="number" id="prod-price" placeholder="Rp" />
                </div>

                <div style="margin-top: 20px; text-align: right">
                    <button onclick="closeProductModal()" style="background: #95a5a6; padding: 10px">Batal</button>
                    <button id="btn-save-product" style="background: #27ae60; padding: 10px">Simpan</button>
                </div>
            </div>
        </div>
        <!-- Modal user -->
        <div id="modal-user" class="modal-overlay" style="display: none">
            <div class="modal-box">
                <h2 id="modal-user-title">Tambah User</h2>

                <input type="hidden" id="user-id-input" />

                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="user-username" placeholder="Username Login" />
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="user-password" placeholder="Password" />
                    <small style="color: #7f8c8d; font-size: 11px">*Kosongkan jika tidak ingin mengubah password (saat Edit)</small>
                </div>
                <div class="form-group">
                    <label>Nama Lengkap</label>
                    <input type="text" id="user-fullname" placeholder="Nama Pegawai" />
                </div>
                <div class="form-group">
                    <label>Role (Jabatan)</label>
                    <select id="user-role">
                        <option value="ADMIN">ADMIN (Full Akses)</option>
                        <option value="WAREHOUSE">GUDANG (Stok)</option>
                        <option value="PURCHASING">PURCHASING (Beli)</option>
                        <option value="SALES">SALES (Jual)</option>
                        <option value="PRODUCTION">PRODUKSI (Rakit)</option>
                    </select>
                </div>

                <div style="margin-top: 20px; text-align: right">
                    <button
                        onclick="closeUserModal()"
                        style="background: #95a5a6; padding: 10px; border: none; color: white; border-radius: 4px; cursor: pointer">
                        Batal
                    </button>
                    <button
                        id="btn-save-user-modal"
                        style="background: #27ae60; padding: 10px; border: none; color: white; border-radius: 4px; cursor: pointer">
                        Simpan
                    </button>
                </div>
            </div>
        </div>
    </body>
</html>
